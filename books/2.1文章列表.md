<!--
 * @Author: your name
 * @Date: 2020-10-13 18:56:58
 * @LastEditTime: 2020-10-14 13:30:08
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /log-backend/books/2.1文章列表.md
-->
### 2.1.1 新建目录和文件
这一节我们要实现一个文章列表页，页面核心用到了pro-table这个组件，pro-table是[ProComponents](https://procomponents.ant.design/docs/intro)中的一个表格组件，相比[Ant Design](https://ant.design/index-cn)的table组件其功能更加强大。
首先在src/pages文件夹下新建一个文件夹article，article文件夹下再新建一个list文件夹并创建一个index.tsx文件，并写入一段简单的代码
```
src/pages/article/list/index.tsx

const ArticleList = () => {
  return (
    <div>文章列表</div>
  );
}

export default ArticleList;

```

### 2.2.2 修改路由
为了能访问到新建的文章列表页，我们需要对路由配置进行修改，找到config/config.ts这个文件，添加以下代码
```
routes: [
  {
    path: '/article',
    name: '文章',
    routes: [
      {
        path: '/article/list',
        name: '所有文章',
        components: './article/list'
      }
    ]
  }
]
```
运行项目查看页面[http://localhost:8000](http://localhost:8000)侧边栏是否出现了"文章"选项，并验证其是否可以正常访问

### 2.2.3 pro-table使用简单介绍
pro-table集成了普通表格、表单查询、搜索、批量操作等多项功能，更强大的功能意味着更复杂的配置，本项目只会用到其中一小部分功能，如果想了解更多，可以查看其[官方文档](https://procomponents.ant.design/components/table)。
首先，我们按照pro-table api创建一个最简单的表格，代码如下
```
import ProTable from '@ant-design/pro-table';
import request from 'umi-request';

const columns = [
  {
    title: '标题',
    dataIndex: 'title'
  },
  {
    title: '作者',
    dataIndex: 'author'
  }
]

export default () => {
  return (
    <ProTable 
      columns={columns}
      request={async (params) => {
        return {
          data: [
            {
              key: 1,
              title: 'umi+egg搭建个人博客(一)',
              author: 'carr'
            },
            {
              key: 2,
              title: 'umi+egg搭建个人博客(二)',
              author: 'carr'
            }
          ]
        }
      }}
    />
  );
}

```
这里我们使用了colums和request两个属性，columns定义表列，request用于获取表格数据，在真实开发中，数据是通过请求API接口获取的，注意每条数据必须包含一个唯一的"key"值。通过以上简单的几行代码，就生成了一个包含分页、查询、设置等功能的数据表格。

### 2.2.4 开发文章列表页
该页面主要由一个表格构成，用于展示所有文章，用到的是上面介绍的ProTable组件，
```
import React, {FC} from 'react';
import ProTable from '@ant-design/pro-table';
import { PageContainer } from '@ant-design/pro-layout';
import { getArticleList } from '@/services/article';
const ArticleList = () => {
  const columns = [
    {
      title: '序号',
      dataIndex: 'index',
      valueType: 'indexBorder';
      width: 72
    },
    {
      title: '编号',
      dataIndex: 'article_id',
    },
    {
      title: '标题',
      dataIndex: 'article_title',
      valueType: 'text'
    },
    {
      title: '创建时间',
      dataIndex: 'article_createTime',
      valueType: 'dataTime'
    }
  ]
  return (
    <ProTable>
      <ProTable 
        columns={columns}
        request={(params) => {
          return new Promise(() => {
            getArticle({params}).then(res => {
              const data = res.data;
              resolve(data)
            })
          })
        }}
      />
    </ProTable>
  );
};

export default ArticleList;
```
